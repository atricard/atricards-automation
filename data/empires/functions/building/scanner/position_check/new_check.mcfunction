execute unless entity @e[type=armor_stand,tag=scanner,distance=..24] if block ~-2 ~-1 ~-2 #empires:valid_stone if block ~-1 ~-1 ~-2 #empires:valid_stone if block ~0 ~-1 ~-2 #empires:valid_stone if block ~1 ~-1 ~-2 #empires:valid_stone if block ~2 ~-1 ~-2 #empires:valid_stone if block ~-2 ~-1 ~-1 #empires:valid_stone if block ~-1 ~-1 ~-1 #empires:valid_stone if block ~0 ~-1 ~-1 #empires:valid_stone if block ~1 ~-1 ~-1 #empires:valid_stone if block ~2 ~-1 ~-1 #empires:valid_stone if block ~-2 ~-1 ~0 #empires:valid_stone if block ~-1 ~-1 ~0 #empires:valid_stone if block ~0 ~-1 ~0 #empires:valid_stone if block ~1 ~-1 ~-0 #empires:valid_stone if block ~2 ~-1 ~0 #empires:valid_stone if block ~-2 ~-1 ~1 #empires:valid_stone if block ~-1 ~-1 ~1 #empires:valid_stone if block ~0 ~-1 ~1 #empires:valid_stone if block ~1 ~-1 ~1 #empires:valid_stone if block ~2 ~-1 ~1 #empires:valid_stone if block ~-2 ~-1 ~2 #empires:valid_stone if block ~-1 ~-1 ~2 #empires:valid_stone if block ~0 ~-1 ~2 #empires:valid_stone if block ~1 ~-1 ~2 #empires:valid_stone if block ~2 ~-1 ~2 #empires:valid_stone run tag @s add unobstructed
execute as @s[tag=!unobstructed] run function empires:building/scanner/position_check/drop_item
execute as @s[tag=unobstructed] run function empires:building/scanner/position_check/summon_scanner